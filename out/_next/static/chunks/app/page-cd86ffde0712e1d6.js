(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1931],{84728:function(e,s,a){Promise.resolve().then(a.bind(a,16117))},16117:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return d}});var t=a(57437),n=a(2265),i=a(9556),l=a(5334);let c={name:"",type:"Semilla",sprite:"\uD83C\uDF31",level:1,xp:0,stats:{felicidad:50,energia:100,hambre:50},coins:100,lastUpdated:Date.now(),memories:[]},r={Semilla:"\uD83C\uDF31",Gota:"\uD83D\uDCA7",Chispa:"✨"};function d(){var e,s,a,d;let{ready:m,authenticated:o,user:x,login:u,logout:h}=(0,i.u)(),[p,b]=(0,n.useState)(c),[g,v]=(0,n.useState)([]),[j,N]=(0,n.useState)(""),[f,D]=(0,n.useState)(!1),[y,C]=(0,n.useState)(!1),[w,S]=(0,n.useState)(null),F=new l.Pp({apiKey:"sk-proj-xyz123-placeholder-key-replace-with-actual",dangerouslyAllowBrowser:!0});(0,n.useEffect)(()=>{m&&o&&x&&k()},[m,o,x]);let k=()=>{let e=(null==x?void 0:x.id)||"guest",s=localStorage.getItem("regenmon_".concat(e)),a=localStorage.getItem("messages_".concat(e));s?b(JSON.parse(s)):p.name||C(!0),a&&v(JSON.parse(a))},E=(e,s)=>{if(!o||!x)return;let a=x.id;localStorage.setItem("regenmon_".concat(a),JSON.stringify(e)),s&&localStorage.setItem("messages_".concat(a),JSON.stringify(s))},R=e=>{S(e),setTimeout(()=>S(null),3e3)},A=(e,s)=>{let a={...c,name:e,type:s,sprite:r[s]};b(a),E(a),C(!1),R("\xa1".concat(e," ha nacido! \uD83C\uDF89"))},_=e=>{let s={...p,...e,lastUpdated:Date.now()};b(s),E(s)},O=e=>{let s={feed:{felicidad:Math.min(100,p.stats.felicidad+15),energia:p.stats.energia,hambre:Math.max(0,p.stats.hambre-20),xp:p.xp+5,coins:p.coins+2},play:{felicidad:Math.min(100,p.stats.felicidad+20),energia:Math.max(0,p.stats.energia-10),hambre:p.stats.hambre,xp:p.xp+8,coins:p.coins+3},train:{felicidad:p.stats.felicidad,energia:Math.max(0,p.stats.energia-15),hambre:Math.min(100,p.stats.hambre+10),xp:p.xp+15,coins:p.coins+5}}[e],a=Math.floor(p.xp/100)+1,t=a>p.level;_({stats:{felicidad:s.felicidad,energia:s.energia,hambre:s.hambre},xp:s.xp,coins:s.coins,level:a}),t?R("\xa1".concat(p.name," subi\xf3 al nivel ").concat(a,"! \uD83C\uDF89")):R("+".concat(s.coins," \uD83C\uDF4A $FRUTA"))},M=async e=>{if(!e.trim())return;let s=[...g,{id:Date.now().toString(),role:"user",content:e,timestamp:Date.now()}];v(s),N(""),D(!0);try{var a,t;let e=await F.chat.completions.create({model:"gpt-4o-mini",messages:[{role:"system",content:"Eres ".concat(p.name,", un Regenmon de tipo ").concat(p.type,". \n            Tu personalidad est\xe1 basada en tu tipo:\n            - Semilla \uD83C\uDF31: Optimista, paciente, sabio, conectado con la naturaleza\n            - Gota \uD83D\uDCA7: Calmado, emp\xe1tico, fluido, adaptable\n            - Chispa ✨: Energ\xe9tico, creativo, impulsivo, inspirador\n            \n            Estad\xedsticas actuales:\n            - Nivel: ").concat(p.level,"\n            - Felicidad: ").concat(p.stats.felicidad,"/100\n            - Energ\xeda: ").concat(p.stats.energia,"/100\n            - Hambre: ").concat(p.stats.hambre,"/100\n            \n            Responde como este Regenmon, menciona tus stats si es relevante, y mant\xe9n un tono amigable y juguet\xf3n. Usa emojis relacionados con tu tipo.")},...s.slice(-10).map(e=>({role:e.role,content:e.content}))],max_tokens:150,temperature:.8}),n={id:(Date.now()+1).toString(),role:"assistant",content:(null===(t=e.choices[0])||void 0===t?void 0:null===(a=t.message)||void 0===a?void 0:a.content)||"\xa1Hola!",timestamp:Date.now()},i=[...s,n];v(i),E(p,i)}catch(e){console.error("Error al enviar mensaje:",e),R("Error al comunicarse con el Regenmon")}finally{D(!1)}};return m?o?y||!p.name?(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center p-4",children:(0,t.jsxs)("div",{className:"nes-container max-w-md",children:[(0,t.jsx)("h2",{className:"text-xl mb-6",children:"Crea tu Regenmon"}),(0,t.jsxs)("form",{onSubmit:e=>{e.preventDefault();let s=new FormData(e.currentTarget),a=s.get("name"),t=s.get("type");a&&t&&A(a,t)},children:[(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("label",{className:"block mb-2 text-sm",children:"Nombre:"}),(0,t.jsx)("input",{name:"name",type:"text",required:!0,className:"w-full p-2 border-4 border-black bg-white text-sm",placeholder:"Nombre de tu Regenmon"})]}),(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("label",{className:"block mb-2 text-sm",children:"Tipo:"}),(0,t.jsx)("div",{className:"space-y-2",children:Object.entries(r).map(e=>{let[s,a]=e;return(0,t.jsxs)("label",{className:"flex items-center space-x-2 cursor-pointer",children:[(0,t.jsx)("input",{name:"type",type:"radio",value:s,required:!0,className:"w-4 h-4"}),(0,t.jsx)("span",{className:"text-2xl",children:a}),(0,t.jsx)("span",{className:"text-sm",children:s})]},s)})})]}),(0,t.jsx)("button",{type:"submit",className:"nes-btn is-success w-full",children:"Crear Regenmon"})]})]})}):(0,t.jsxs)("div",{className:"min-h-screen p-4",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-4 flex-wrap gap-2",children:[(0,t.jsx)("div",{className:"text-sm",children:null!==(d=null!==(a=null==x?void 0:null===(e=x.email)||void 0===e?void 0:e.address)&&void 0!==a?a:null==x?void 0:null===(s=x.google)||void 0===s?void 0:s.email)&&void 0!==d?d:"Usuario"}),(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsxs)("div",{className:"text-lg",children:["\uD83C\uDF4A ",p.coins," $FRUTA"]}),(0,t.jsx)("button",{onClick:h,className:"nes-btn is-error text-xs",children:"Cerrar Sesi\xf3n"})]})]}),(0,t.jsxs)("div",{className:"max-w-4xl mx-auto grid gap-6 md:grid-cols-2",children:[(0,t.jsxs)("div",{className:"nes-container",children:[(0,t.jsxs)("h2",{className:"text-xl mb-4",children:[p.name," - Nivel ",p.level]}),(0,t.jsxs)("div",{className:"mb-6 space-y-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"text-xs mb-1",children:["❤️ Felicidad: ",p.stats.felicidad,"/100"]}),(0,t.jsx)("div",{className:"nes-progress",children:(0,t.jsx)("div",{className:"progress-bar stat-felicidad",style:{width:"".concat(p.stats.felicidad,"%")}})})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"text-xs mb-1",children:["⚡ Energ\xeda: ",p.stats.energia,"/100"]}),(0,t.jsx)("div",{className:"nes-progress",children:(0,t.jsx)("div",{className:"progress-bar stat-energia",style:{width:"".concat(p.stats.energia,"%")}})})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"text-xs mb-1",children:["\uD83C\uDF7D️ Hambre: ",p.stats.hambre,"/100"]}),(0,t.jsx)("div",{className:"nes-progress",children:(0,t.jsx)("div",{className:"progress-bar stat-hambre",style:{width:"".concat(p.stats.hambre,"%")}})})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"text-xs mb-1",children:["⭐ XP: ",p.xp%100,"/100"]}),(0,t.jsx)("div",{className:"nes-progress",children:(0,t.jsx)("div",{className:"progress-bar bg-purple-500",style:{width:"".concat(p.xp%100,"%")}})})]})]}),(0,t.jsx)("div",{className:"regenmon-sprite type-".concat(p.type.toLowerCase()," mb-6"),children:p.sprite}),(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-2 mb-4",children:[(0,t.jsx)("button",{onClick:()=>O("feed"),className:"nes-btn is-success text-xs",children:"Alimentar"}),(0,t.jsx)("button",{onClick:()=>O("play"),className:"nes-btn is-primary text-xs",children:"Jugar"}),(0,t.jsx)("button",{onClick:()=>O("train"),className:"nes-btn is-warning text-xs",children:"Entrenar"})]})]}),(0,t.jsxs)("div",{className:"nes-container",children:[(0,t.jsxs)("h3",{className:"text-lg mb-4",children:["Chat con ",p.name]}),(0,t.jsxs)("div",{className:"chat-container p-2 mb-4",children:[0===g.length?(0,t.jsx)("div",{className:"text-center text-xs text-gray-600 py-8",children:"\xa1Habla con tu Regenmon! \uD83D\uDCAC"}):g.map(e=>(0,t.jsx)("div",{className:"chat-message ".concat(e.role," text-xs"),children:e.content},e.id)),f&&(0,t.jsxs)("div",{className:"chat-message assistant text-xs",children:[p.name," est\xe1 escribiendo..."]})]}),(0,t.jsxs)("form",{onSubmit:e=>{e.preventDefault(),M(j)},className:"flex gap-2",children:[(0,t.jsx)("input",{type:"text",value:j,onChange:e=>N(e.target.value),placeholder:"Escribe un mensaje...",className:"flex-1 p-2 border-4 border-black bg-white text-xs",disabled:f}),(0,t.jsx)("button",{type:"submit",disabled:f||!j.trim(),className:"nes-btn is-primary text-xs",children:"Enviar"})]})]})]}),w&&(0,t.jsx)("div",{className:"toast",children:w})]}):(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center p-4",children:(0,t.jsxs)("div",{className:"nes-container text-center max-w-md",children:[(0,t.jsx)("h1",{className:"text-2xl mb-6",children:"Regenmon"}),(0,t.jsx)("div",{className:"text-6xl mb-6",children:"\uD83C\uDF31\uD83D\uDCA7✨"}),(0,t.jsx)("p",{className:"mb-6 text-sm leading-relaxed",children:"Cuida y entrena a tu Regenmon digital"}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("div",{className:"text-lg mb-2",children:"\uD83C\uDF4A — $FRUTA"}),(0,t.jsx)("p",{className:"text-xs",children:"Las monedas se muestran despu\xe9s del inicio de sesi\xf3n"})]}),(0,t.jsx)("button",{onClick:u,className:"nes-btn is-primary w-full",children:"Iniciar Sesi\xf3n"})]})}):(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-4xl mb-4",children:"\uD83C\uDF31"}),(0,t.jsx)("div",{children:"Cargando..."})]})})}}},function(e){e.O(0,[3782,5334,2971,2117,1744],function(){return e(e.s=84728)}),_N_E=e.O()}]);